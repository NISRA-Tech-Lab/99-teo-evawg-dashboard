export function insertHeader () {

    const nav = document.getElementById("nav");

    nav.classList.add("navbar");
    nav.classList.add("p-0");
    nav.style.backgroundColor = "#00205b";
    nav.innerHTML = `<div class="container-fluid d-flex flex-column align-items-stretch p-0">
    <!-- Banner row (full width) -->
    <div class="w-100" style="background-color:#3878c5;">
        <div class="text-white text-center py-2 px-3">
            <strong>We welcome feedback from users through our 
                <a href="#" target="_blank">short survey</a>
            </strong>
        </div>
    </div>

    <!-- Main navbar row -->
    <div class="d-flex row align-items-center justify-content-between w-100 py-3 px-2">

        <!-- Left: NISRA logo -->
        <div class="col">
          <a class="navbar-brand ps-2 d-flex align-items-center" href="./">
              <img src="assets/img/logo/nisra-only-white.svg" 
                  alt="NISRA logo" height="60" class="me-3">
          </a>
        </div>

        <!-- Center: Page title -->
        <div class="col flex-grow-1 text-center">
            <h1 class="mb-0 text-white fs-2 app-title">Gender-based violence</h1>
        </div>

        <!-- Right: TEO logo -->
        <div class = "col">
          <a class="navbar-brand pe-2 d-flex align-items-center justify-content-end" href="./">
              <img src="assets/img/logo/teo-white.png" 
                  alt="TEO logo" height="60" class="ms-3">
          </a>
        </div>

    </div>
</div>
`
}

export function insertNavButtons() {
  const nav = document.getElementById("nav");

  const links = [
    { id: "home-btn", href: "index.html", text: "Home" },
    { id: "violence-against-women-and-men-btn", href: "violence-against-women-and-men.html", text: "Violence against women and men" },
    { id: "violence-against-girls-and-boys-btn", href: "violence-against-girls-and-boys.html", text: "Violence against girls and boys" },
    { id: "police-recorded-crime-evawg-btn", href: "police-recorded-crime-evawg.html", text: "Police recorded crime - EVAWG" },
    { id: "homicides-btn", href: "homicides.html", text: "Homicides" },
    { id: "domestic-abuse-btn", href: "domestic-abuse.html", text: "Domestic abuse" },
    { id: "police-recorded-crime-domestic-abuse-btn", href: "police-recorded-crime-domestic-abuse.html", text: "Police recorded crime - Domestic abuse" },
    { id: "case-processing-times-btn", href: "case-processing-times.html", text: "Case processing times" },
    { id: "maps-btn", href: "maps.html", text: "Maps" },
    { id: "information-btn", href: "information.html", text: "Information" },
  ];

  const pathname = window.location.pathname;
  const file = pathname.slice(pathname.lastIndexOf("/") + 1) || "index.html";
  const pageKey = file.replace(".html", "");

  // Desktop: row of buttons (lg+). Mobile: hamburger dropdown (<lg).
  nav.innerHTML += `
    <div class="container-fluid px-2">

      <!-- Mobile only -->

      <div class="d-lg-none w-100 text-center pb-2">
        <div class="dropdown d-inline-block">
          <button class="btn btn-light dropdown-toggle"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            aria-label="Open menu">
            <span class="me-1">Menu</span>
            <i class="bi bi-list" aria-hidden="true"></i>
          </button>

          <!-- optional: keep menu centered under button -->
          <ul class="dropdown-menu start-50 translate-middle-x">
            ${links
            .map(
              (l) => `
                <li>
                  <a class="dropdown-item ${l.id === `${pageKey}-btn` ? "active" : ""}"
                    id="${l.id}-mobile"
                    href="${l.href}">
                    ${l.text}
                  </a>
                </li>`
            )
            .join("")}
          </ul>
        </div>
      </div>


      <!-- Desktop only -->
      <div class="d-none d-lg-block">
        <div class="row g-2">
          ${links
            .map(
              (l) => `
                <a id="${l.id}" class="col nav-btn" href="${l.href}">
                  ${l.text}
                </a>`
            )
            .join("")}
        </div>
      </div>

    </div>
  `;

  // Apply current-page styling to the DESKTOP buttons (to match your existing CSS)
  const currentDesktop = document.getElementById(`${pageKey}-btn`);
  if (currentDesktop) {
    currentDesktop.classList.add("current-page");
    currentDesktop.classList.remove("nav-btn");
    currentDesktop.innerHTML = currentDesktop.textContent;
  }
}


export function insertFooter () {

    const footer = document.getElementById("footer");

    footer.classList.add("footer");
    footer.classList.add("py-4");
    footer.classList.add("bg-nisra");
    footer.classList.add("text-nisra");

    
    footer.innerHTML = `<div class="container">
      <!-- 3 column section -->
      <div class="row mb-3">
        <div class="col-md-4">
          <h5>Data Tools</h5>
          <ul class="list-unstyled">
            <li><a href="https://explore.nisra.gov.uk/local-stats/">Local Statistics Explorer</a></li>
            <li><a href="https://data.nisra.gov.uk">Data Portal</a></li>
            <li><a href="https://build.nisra.gov.uk/en/">Census Flexible Table Builder</a></li>
          </ul>
        </div>
        <div class="col-md-4">
          <h5>Corporate</h5>
          <ul class="list-unstyled">
            <li><a href="https://www.nisra.gov.uk/">NISRA Website</a></li>
            <li><a href="https://www.nisra.gov.uk/statistics/about-nisra/careers">Careers</a></li>
            <li><a href="https://www.nisra.gov.uk/contact">Contact</a></li>
          </ul>
        </div>
        <div class="col-md-4">
          <h5>Follow</h5>
          <ul class="list-inline">
            <li class="list-inline-item">
              <a href="https://www.facebook.com/nisra.gov.uk">
                <img src="assets/img/logo/facebook-brands-solid-full.svg" title="Facebook" role="img" class="img-50"/>
              </a>
            </li>
            <li class="list-inline-item">
              <a href="https://x.com/NISRA/">
                <img src="assets/img/logo/x-twitter-brands-solid-full.svg" title="Twitter/X" role="img" class="img-50"/>
              </a>
            </li>
            <li class="list-inline-item">
              <a href="https://www.youtube.com/user/nisrastats">
                <img src="assets/img/logo/youtube-brands-solid-full.svg" title="YouTube" role="img" class="img-50"/>
              </a>
            </li>
            <li class="list-inline-item">
              <a href="https://www.linkedin.com/company/northern-ireland-statistics-and-research-agency/">
                <img src="assets/img/logo/linkedin-in-brands-solid-full.svg" title="LinkedIn" role="img" class="img-50"/>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <!-- Horizontal list with separators -->
      <ul class="list-inline footer-links text-center mb-0">
        <li class="list-inline-item"><a href="https://www.nisra.gov.uk/crown-copyright">Â© Crown Copyright</a></li>
        <li class="list-inline-item">|</li>
        <li class="list-inline-item"><a href="https://www.nisra.gov.uk/terms-and-conditions">Terms and conditions</a></li>
        <li class="list-inline-item">|</li>
        <li class="list-inline-item"><a href="https://www.nisra.gov.uk/cookies">Cookies</a></li>
        <li class="list-inline-item">|</li>
        <li class="list-inline-item"><a href="https://www.nisra.gov.uk/nisra-privacy-notice">Privacy</a></li>
        <li class="list-inline-item">|</li>
        <li class="list-inline-item"><a href="https://datavis.nisra.gov.uk/dissemination/accessibility-statement-visualisations.html">Accessibility Statement</a></li>
      </ul>
    </div>`

    
    
    function adjustFooterMargin() {
      const margin_needed = (window.innerHeight - document.getElementById("nav").clientHeight - document.getElementById("content").clientHeight - footer.clientHeight) - 4;
      footer.style.marginTop = (margin_needed) > 0 ? `${margin_needed}px` : "0px";
    }

    adjustFooterMargin();
    window.addEventListener("resize", adjustFooterMargin); 



}

export async function insertHead(title) {
  const head = document.head;

  // Clear existing head safely if you really need to
  head.innerHTML = `
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gender-based Violence - ${title}</title>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <link rel="icon" href="assets/img/icon/favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="icon" type="image/png" href="assets/img/icon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="assets/img/icon/favicon.svg" />
    <link rel="shortcut icon" href="assets/img/icon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Gender-based violence - ${title}" />

    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@5.6.2/dist/maplibre-gl.css">
    <link href="https://cdn.jsdelivr.net/npm/@watergis/maplibre-gl-export@4.1.0/dist/maplibre-gl-export.css" rel="stylesheet" />

    <link rel="stylesheet" href="assets/css/styles.css">
  `;

  // helper to load scripts in order
  const loadScript = (src) =>
    new Promise((resolve, reject) => {
      const s = document.createElement("script");
      s.src = src;
      s.defer = true;
      s.onload = resolve;
      s.onerror = reject;
      head.appendChild(s);
    });

  await loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js");
  await loadScript("https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js");
  await loadScript("https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/3.0.1/chartjs-plugin-annotation.min.js");
  await loadScript("https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2");
  await loadScript("https://unpkg.com/maplibre-gl@5.6.2/dist/maplibre-gl.js");
  await loadScript("https://cdn.jsdelivr.net/npm/@watergis/maplibre-gl-export@4.1.0/dist/maplibre-gl-export.umd.js");

  document.body.removeAttribute("style");

}


