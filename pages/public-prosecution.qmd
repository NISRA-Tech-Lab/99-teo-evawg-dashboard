---
title: "public_prosecution"
---



```{r}
#| include: FALSE

library(here)
source(here("data_prep/pps_data_prep.R"))
```


```{r}
#| title: Median time taken for cases to be dealt with at court in 2023/24

# Define reversed order
offence_order <- rev(pps_chart1_data$offence)


pps_plot <- plot_ly(
  data = pps_chart1_data,
  x = ~days,
  y = ~offence,
  type = 'bar',
  orientation = 'h',
  text = ~hover_text,
  hoverinfo = 'text',
  textposition = 'none',
  marker = list(color = nisra_colours[2])
) %>%
layout(
  title = "",
  xaxis = list(title = "Days"),
  yaxis = list(
    title = list(text = ""),  
    categoryorder = "array",
    categoryarray = offence_order
),
  annotations = list(
    list(
      x = -0.01,
      xref = "paper",
      xanchor = "center",
      y = 1.025,
      yref = "paper",
      yanchor = "bottom",
      text = "Offence",
      showarrow = FALSE,
      font = list(size = 14)
    )
  ),
  font = list(family = "Arial", size = 12),
  margin = list(l = 150, t = 80, b = 80)
) %>%
  config(displayModeBar = FALSE)

div(
  pps_plot,
  p("Average is measured as the median number of days taken, i.e., the number of days at which 50% of those cases included under counting rules has been completed. This is an overview of the time taken for a case to be disposed at court from the date that case began its journey through the criminal justice system, based on a start point of the date the offence was reported to, or detected by, the PSNI."),
  p(
    "Source: ",
    a(
      href = "https://view.officeapps.live.com/op/view.aspx?src=https%3A%2F%2Fwww.justice-ni.gov.uk%2Fsites%2Fdefault%2Ffiles%2Fpublications%2Fjustice%2F202324%2520case%2520processing%2520time%2520tables%2520-%2520%2520open%2520data%2520format.ods&wdOrigin=BROWSELINK",
      "Time taken for cases dealt with at courts by offence type, 2019-20 to 2023-24 (Worksheet 5) (opens in a new tab)",
      target = "_blank"
    )
  )
)


```
  